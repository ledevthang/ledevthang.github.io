(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1165:function(t,e,r){var map={"./1.svg":1169,"./2.svg":1170,"./3.svg":1171,"./4.svg":1172,"./5.svg":1173,"./6.svg":1174};function n(t){var e=o(t);return r(e)}function o(t){if(!r.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}n.keys=function(){return Object.keys(map)},n.resolve=o,t.exports=n,n.id=1165},1169:function(t,e,r){t.exports=r.p+"img/1.fa92061.svg"},1170:function(t,e,r){t.exports=r.p+"img/2.b7a641a.svg"},1171:function(t,e,r){t.exports=r.p+"img/3.c96d755.svg"},1172:function(t,e,r){t.exports=r.p+"img/4.d693367.svg"},1173:function(t,e,r){t.exports=r.p+"img/5.03a2db6.svg"},1174:function(t,e,r){t.exports=r.p+"img/6.121b896.svg"},1234:function(t,e,r){var content=r(1272);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(29).default)("b2c4fa8e",content,!0,{sourceMap:!1})},1271:function(t,e,r){"use strict";r(1234)},1272:function(t,e,r){var n=r(28)(!1);n.push([t.i,".basil{background-color:transparent!important;box-shadow:unset!important}.basil--text{color:#356859!important}.description-company>div{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.title-zone>div{margin-bottom:5px;color:#757575}.title-zone span{width:60%;text-align:left;color:#111827!important}.product-items{display:flex;flex-wrap:wrap}.product-item{cursor:pointer;text-align:center;display:flex;flex-direction:column;margin-right:10px}.product-item-image{width:150px;height:150px;border-radius:6px;background:rgba(53,104,89,.3);display:flex;align-items:center;justify-content:center;overflow:hidden}.company-zone{display:flex}.company-image{display:inline-block;padding:80px;background:#f2f2f2;margin-right:50px}@media screen and (max-width:960px){.company-zone{flex-direction:column;justify-content:center;align-items:center}.company-image{margin-right:0}}#qrid>img{margin:auto}@media screen and (max-width:960px){.product-detail{flex-direction:column;align-items:center}.product-detail>*{width:100%!important;text-align:center;margin:20px 0}}",""]),t.exports=n},1296:function(t,e,r){"use strict";r.r(e);r(21),r(20),r(30),r(19),r(31);var n=r(4),o=r(10),c=(r(58),r(24),r(7),r(88),r(57),r(87)),l=r(82),d=r.n(l),v=r(192);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y={asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,data,o,c,l,v,m,y,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.params,t.store,n=+r.id,e.next=4,d.a.get("https://tomato-chain-default-rtdb.asia-southeast1.firebasedatabase.app/product.json");case 4:return data=e.sent,e.next=7,d.a.get("https://tomato-chain-default-rtdb.asia-southeast1.firebasedatabase.app/diary.json");case 7:for(v in o=e.sent,c=[],l=[],data.data)c.push(f({},data.data[v]));for(m in o.data)l.push(f({},o.data[m]));return y=c.filter((function(t){return t.productID===n}))[0],h=l.filter((function(t){return t.id===n})),console.log(h,"dairyArray"),e.abrupt("return",{product:y,dairyArray:h,id:n});case 16:case"end":return e.stop()}}),e)})))()},data:function(){return{loading:!1,selection:1,url:"",showSuccessDialog:!1,text:"",hash:null,msg:null,valid:!0,role:"Admin",productRule:[function(t){return!!t||"This field cannot be left blank"},function(t){return t&&t.length<=36||"Too long"}],diaryDialog:!1,loadingDiary:!1}},computed:f(f(f({},Object(c.c)("walletStore",["currentAddress"])),Object(c.c)("companyStore",["allProduct","companyInfo"])),{},{getUrlRandom:function(){return r(1165)("./".concat(this.randomNumber(),".svg"))}}),mounted:function(){this.url=window.location.href},methods:{randomNumber:function(){return Math.floor(6*Math.random()+1)},findCompanyId:function(t){return console.log(this.companyInfo,"this.companyInfo"),this.companyInfo.filter((function(e){return e.companyAddress===t}))},getDate:function(){var t=new Date,e=t.getUTCMonth()+1;return t.getUTCDate()+"/"+e+"/"+t.getUTCFullYear()},updateDairy:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.dairyArray,"dairyArray"),e.next=3,d.a.get("https://tomato-chain-default-rtdb.asia-southeast1.firebasedatabase.app/diary.json");case 3:for(o in r=e.sent,t.dairyArray=[],n=[],r.data)n.push(f({},r.data[o]));t.dairyArray=n.filter((function(e){return e.id===t.id}));case 8:case"end":return e.stop()}}),e)})))()},writeProductDairy:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var data,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loadingDiary=!0,!t.$refs.form.validate()){e.next=19;break}return e.prev=2,e.next=5,v.e(t.id,t.text.toString());case 5:data=e.sent,r={id:t.id,timestamp:t.getDate(),message:t.text.toString(),role:t.role},console.log(data,"data"),setTimeout(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!data.tx.txHash){e.next=14;break}return t.msg=data.tx.msg,t.hash=data.tx.txHash,r.txHash=data.tx.txHash,t.loadingDiary=!1,t.diaryDialog=!1,t.showSuccessDialog=!0,e.next=9,d.a.post("https://tomato-chain-default-rtdb.asia-southeast1.firebasedatabase.app/diary.json",r);case 9:t.updateDairy(),t.$refs.form.reset(),t.role="Admin",e.next=19;break;case 14:t.msg=data.tx.msg,t.hash=null,t.loadingDiary=!1,t.diaryDialog=!1,t.showSuccessDialog=!0;case 19:case"end":return e.stop()}}),e)}))),2e3),e.next=19;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),t.msg="Something wrong, please try again XD",t.hash=null,t.loadingDiary=!1,t.diaryDialog=!1,t.showSuccessDialog=!0;case 19:case"end":return e.stop()}}),e,null,[[2,11]])})))()},goToLink:function(t,e){var r=this.$getScanLink(t,e);window.open(r,"_blank")},reserve:function(){var t=this;this.loading=!0,setTimeout((function(){return t.loading=!1}),2e3)},download:function(){var t=document.getElementById("qrid").getElementsByTagName("img")[0].src,e=document.getElementById("download");e.href=t,e.click()}}},h=(r(1271),r(72)),x=r(108),_=r.n(x),w=r(1284),D=r(320),k=r(299),C=r(86),S=r(1258),T=r(1162),O=r(1160),j=r(1282),R=r(238),z=r(1196),A=r(1283),P=r(1159),V=r(1288),E=r(1285),I=r(1286),component=Object(h.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("div",[t.product&&"0"!==t.product.productID?r("div",[r("v-card",{attrs:{color:"basil"}},[r("div",{staticClass:"company-zone mb-5"},[r("div",{staticClass:"company-img-zone"},[r("img",{attrs:{src:t.getUrlRandom,alt:""}})]),t._v(" "),r("div",{staticClass:"company-info-zone"},[r("v-card-title",{staticClass:"text-left px-0 py-0 pb-6"},[r("h3",{staticClass:"font-weight-bold text-h4 basil--text"},[t._v("\n              "+t._s(t.product.productName)+"\n            ")])]),t._v(" "),r("div",{staticClass:"mb-3"},[r("span",{staticStyle:{color:"#757575"}},[t._v("$ â€¢ Italian, Vegetable")]),t._v(" "),r("span",{staticClass:"mx-3"},[t._v("/")]),t._v(" "),r("b",{staticStyle:{color:"#37AB76"},on:{click:function(e){e.stopPropagation(),t.goToLink(t.findCompanyId(t.product.Provider),"address")}}},[t._v("\n                "+t._s(t.product.companyName)+"\n              ")])]),t._v(" "),r("div",{staticClass:"title-zone"},[r("div",{staticClass:"mx-0 mb-8 d-flex align-center",staticStyle:{"border-bottom":"1px solid #E5E7EB","padding-bottom":"30px"}},[r("v-rating",{attrs:{value:0,"background-color":"#d6d6d6",color:"yellow",dense:"","half-increments":"",size:"20"}}),t._v(" "),r("div",{staticClass:"ms-4"},[t._v("\n                0 review\n              ")])],1),t._v(" "),r("div",{staticClass:"description-company"},[r("div",[t._v("ID "),r("span",[t._v("TMT"+t._s(t.product.productID))])]),t._v(" "),r("div",[t._v("Product Price "),r("span",[t._v("$"+t._s(t.product.productPrice))])]),t._v(" "),r("div",[t._v("Description "),r("span",[t._v(t._s(t.product.productDescription))])]),t._v(" "),r("div",[t._v("Date of Manufacture "),r("span",[t._v(t._s(t.product.dateOfManufacture))])]),t._v(" "),r("div",[t._v("Expiration Date "),r("span",[t._v(t._s(t.product.expirationDate))])]),t._v(" "),r("div",[t._v("Quantity "),r("span",[t._v(t._s(t.product.quantity))])]),t._v(" "),r("div",[t._v("TxHash \n              "),r("span",[r("a",{attrs:{href:t.$getScanLink(t.product.txHash,"tx"),target:"_blank"}},[t._v("\n                  "+t._s(t.$shortAddress(t.product.txHash,12))+"\n                ")])])])])])],1)])]),t._v(" "),r("div",{staticClass:"diary-qr-zone"},[r("div",{staticStyle:{width:"30%",display:"flex","flex-direction":"column"}},[r("div",{staticStyle:{color:"#111827","text-align":"center","margin-bottom":"20px","font-size":"18px","font-weight":"bold"}},[t._v("Scan QR to get information of this product")]),t._v(" "),r("qr-code",{attrs:{id:"qrid",text:t.url}}),t._v(" "),r("v-btn",{staticClass:"mt-5",attrs:{rounded:"",dark:"",color:"#37ab76"},on:{click:t.download}},[r("b",[t._v("Download QRcode")])]),t._v(" "),r("a",{attrs:{id:"download",href:"",download:""}})],1),t._v(" "),r("div",{staticClass:"diary-zone"},[r("div",{staticClass:"write-btn"},[r("v-btn",{attrs:{rounded:"",dark:"",color:"#37ab76"},on:{click:function(e){t.diaryDialog=!0}}},[r("b",[t._v("Write diary")])])],1),t._v(" "),r("v-card",{staticClass:"mx-auto basil",attrs:{"align-top":!0}},[r("v-card-text",{staticClass:"py-0"},[0!==t.dairyArray.length?r("v-timeline",t._l(t.dairyArray,(function(e,n){return r("v-timeline-item",{key:n,attrs:{color:"#37ab76",right:!0,small:""}},[r("div",{staticClass:"d-flex justify-end align-center",attrs:{slot:"opposite"},slot:"opposite"},[r("div",["Admin"===e.role?r("v-avatar",[r("v-img",{attrs:{src:"https://avataaars.io/?avatarStyle=Circle&topType=LongHairMiaWallace&accessoriesType=Sunglasses&hairColor=BlondeGolden&facialHairType=Blank&clotheType=BlazerSweater&eyeType=Surprised&eyebrowType=RaisedExcited&mouthType=Smile&skinColor=Pale"}})],1):r("v-avatar",[r("v-img",{attrs:{src:"https://avataaars.io/?avatarStyle=Circle&topType=LongHairFrida&accessoriesType=Kurt&hairColor=Red&facialHairType=BeardLight&facialHairColor=BrownDark&clotheType=GraphicShirt&clotheColor=Gray01&graphicType=Skull&eyeType=Wink&eyebrowType=RaisedExcitedNatural&mouthType=Disbelief&skinColor=Brown"}})],1)],1),t._v(" "),r("div",{staticClass:"text-left ml-3"},[r("strong",{staticStyle:{color:"#3BB77E"}},[t._v("\n                    "+t._s(e.role)+"\n                  ")]),t._v(" "),r("div",[r("b",[t._v(t._s(e.timestamp))])])])]),t._v(" "),r("v-row",{staticClass:"pt-1"},[r("v-col",[r("div",{staticClass:"text-caption"},[r("div",[r("b",[t._v(t._s(e.timestamp))])]),t._v(" "),r("i",[t._v(t._s(e.message))]),r("br"),t._v(" "),r("b",{staticStyle:{color:"#00bcff",cursor:"pointer"},on:{click:function(r){return t.goToLink(e.txHash,"tx")}}},[t._v("see txHash")])])])],1)],1)})),1):t._e()],1)],1)],1)])],1):r("div",[t._v("\n      Not found product\n    ")])]),t._v(" "),r("v-dialog",{attrs:{width:"500px"},model:{value:t.diaryDialog,callback:function(e){t.diaryDialog=e},expression:"diaryDialog"}},[r("v-card",{staticStyle:{padding:"10px","text-align":"center"},attrs:{light:""}},[r("div",[r("div",{staticClass:"mb-4"},[r("b",{staticStyle:{color:"#37ab76","font-size":"18px"}},[t._v("Add your product's diary")])]),t._v(" "),r("v-form",{ref:"form",staticStyle:{width:"100%"},attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{staticStyle:{width:"100%"},attrs:{rules:t.productRule,label:"Your Role",required:"",outlined:""},model:{value:t.role,callback:function(e){t.role=e},expression:"role"}}),t._v(" "),r("v-text-field",{staticStyle:{width:"100%"},attrs:{rules:t.productRule,label:"Diary content",required:"",outlined:""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),t._v(" "),r("div",{staticClass:"text-left"},[r("i",[t._v("EG: 13/5: sow seeds,...")])])],1),t._v(" "),r("v-card-actions",{staticStyle:{"flex-direction":"column"}},[r("v-spacer"),t._v(" "),r("div",{staticClass:"action-zone",staticStyle:{"margin-bottom":"20px"}},[r("v-btn",{staticClass:"mt-2",attrs:{disabled:!t.valid,loading:t.loadingDiary,rounded:"",dark:"",color:"#37ab76"},on:{click:t.writeProductDairy}},[r("b",[t._v("Write Product's Diary")])])],1)],1)],1)],1),t._v(" "),r("v-dialog",{attrs:{width:"300px"},model:{value:t.showSuccessDialog,callback:function(e){t.showSuccessDialog=e},expression:"showSuccessDialog"}},[r("v-card",{staticStyle:{padding:"10px","text-align":"center"},attrs:{light:""}},[r("v-card-actions",{staticStyle:{"flex-direction":"column"}},[r("div",{staticClass:"text-zone",staticStyle:{width:"100%"}},[r("b",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.msg))]),t._v(" "),t.hash?r("div",[r("a",{attrs:{href:t.$getScanLink(t.hash,"tx")}},[t._v("\n                "+t._s(t.hash)+"\n              ")])]):t._e()]),t._v(" "),r("v-spacer"),t._v(" "),r("div",{staticClass:"action-zone",staticStyle:{margin:"20px 0"}},[r("v-btn",{attrs:{color:"#28a745",medium:"",depressed:"",dark:""},on:{click:function(e){t.showSuccessDialog=!1}}},[t._v("\n              Good!\n            ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;_()(component,{VAvatar:w.a,VBtn:D.a,VCard:k.a,VCardActions:C.a,VCardText:C.b,VCardTitle:C.c,VCol:S.a,VContainer:T.a,VDialog:O.a,VForm:j.a,VImg:R.a,VRating:z.a,VRow:A.a,VSpacer:P.a,VTextField:V.a,VTimeline:E.a,VTimelineItem:I.a})}}]);